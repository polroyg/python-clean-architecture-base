version: "3.8"

services:
  devcontainer:
    build:
      context: ..
      dockerfile: .devcontainer/Dockerfile
    volumes:
      # Monta tu proyecto en /workspace
      - ..:/workspace:cached
      # Monta tu carpeta .ssh del host en el contenedor
      - ${HOME}/.ssh:/home/vscode/.ssh:ro
    user: "vscode"
    command: sleep infinity
    environment:
      # Asegura que Git use la carpeta correcta
      - GIT_SSH_COMMAND=ssh -i /home/vscode/.ssh/id_rsa
